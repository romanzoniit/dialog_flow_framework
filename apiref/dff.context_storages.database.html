

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
    <link href="../_static/images/logo-dff.svg" rel="icon" type="image/svg+xml">
    <title>Database &#8212; DFF 0.3.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'apiref/dff.context_storages.database';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Messenger Interfaces" href="index_messenger_interfaces.html" />
    <link rel="prev" title="Redis" href="dff.context_storages.redis.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">DFF 0.3.2 documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../get_started.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../about_us.html">
                        About us
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.deeppavlov.ai" title="DeepPavlov Forum" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/images/logo-deeppavlov.svg" class="icon-link-image" alt="DeepPavlov Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://t.me/DeepPavlovDreamDiscussions" title="Telegram" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-telegram"></i></span>
            <label class="sr-only">Telegram</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/deeppavlov/dialog_flow_framework" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../get_started.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development.html">
                        Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../about_us.html">
                        About us
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.deeppavlov.ai" title="DeepPavlov Forum" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/images/logo-deeppavlov.svg" class="icon-link-image" alt="DeepPavlov Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://t.me/DeepPavlovDreamDiscussions" title="Telegram" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-telegram"></i></span>
            <label class="sr-only">Telegram</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/deeppavlov/dialog_flow_framework" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index_context_storages.html">Context Storages</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.ydb.html">Yandex DB</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.json.html">JSON</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.protocol.html">Protocol</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.mongo.html">Mongo</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.pickle.html">Pickle</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.sql.html">SQL</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.shelve.html">Shelve</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.context_storages.redis.html">Redis</a></li>

<li class="toctree-l2 current active"><a class="current reference internal" href="#">Database</a></li>



</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index_messenger_interfaces.html">Messenger Interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dff.messengers.telegram.interface.html">Interface</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.messengers.telegram.messenger.html">Messenger</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.messengers.common.interface.html">Message Interfaces</a></li>




<li class="toctree-l2"><a class="reference internal" href="dff.messengers.telegram.utils.html">Utils</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.messengers.common.types.html">Types</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.messengers.telegram.message.html">Telegram Message</a></li>




</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index_pipeline.html">Pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.pipeline.component.html">Component</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.service.service.html">Service</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.types.html">Types</a></li>















<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.service.utils.html">Utility Functions</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.service.extra.html">Extra Handler</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.conditions.html">Conditions</a></li>






<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.pipeline.pipeline.html">Pipeline</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.pipeline.actor.html">Actor</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.pipeline.utils.html">Utils</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.pipeline.service.group.html">Service Group</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index_script.html">Script</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dff.script.core.types.html">Types</a></li>









<li class="toctree-l2"><a class="reference internal" href="dff.script.core.script.html">Script</a></li>


<li class="toctree-l2"><a class="reference internal" href="dff.script.core.message.html">Message</a></li>















<li class="toctree-l2"><a class="reference internal" href="dff.script.core.keywords.html">Keywords</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.script.conditions.std_conditions.html">Conditions</a></li>












<li class="toctree-l2"><a class="reference internal" href="dff.script.core.normalization.html">Normalization</a></li>








<li class="toctree-l2"><a class="reference internal" href="dff.script.extras.slots.html">dff.script.extras.slots package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dff.script.core.context.html">Context</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.script.labels.std_labels.html">Labels</a></li>






<li class="toctree-l2"><a class="reference internal" href="dff.script.responses.std_responses.html">Responses</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.script.extras.conditions.html">dff.script.extras.conditions package</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="index_utils.html">Utils</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dff.utils.testing.telegram.html">Telegram testing utils</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.utils.testing.common.html">Common</a></li>



<li class="toctree-l2"><a class="reference internal" href="dff.utils.testing.response_comparers.html">Response comparer</a></li>

<li class="toctree-l2"><a class="reference internal" href="dff.utils.testing.cleanup_db.html">Cleanup DB</a></li>







<li class="toctree-l2"><a class="reference internal" href="dff.utils.testing.toy_script.html">Toy script</a></li>


</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../reference.html" class="nav-link">API reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="index_context_storages.html" class="nav-link">Context Storages</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Database</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <span class="target" id="module-dff.context_storages.database"></span><section id="database">
<h1>Database<a class="headerlink" href="#database" title="Permalink to this heading">#</a></h1>
<p>The <cite>Database</cite> module provides classes for managing the context storage of a dialog system.
The module can be used to store information such as the current state of the conversation
and other data. This module includes the intermediate class (<a class="reference internal" href="#dff.context_storages.database.DBContextStorage" title="dff.context_storages.database.DBContextStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">DBContextStorage</span></code></a>) is a class
that developers can inherit from in order to create their own context storage solutions.
This class implements the basic functionality and can be extended to add additional features as needed.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DBContextStorage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>An abstract interface for <cite>dff</cite> DB context storages.
It includes the most essential methods of the python <cite>dict</cite> class.
Can not be instantiated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Parameter <cite>path</cite> should be set with the URI of the database.
It includes a prefix and the required connection credentials.
Example: postgresql+asyncpg://user:password&#64;host:port/database
In the case of classes that save data to hard drive instead of external databases
you need to specify the location of the file, like you do in sqlite.
Keep in mind that in Windows you will have to use double backslashes ‘\’
instead of forward slashes ‘/’ when defining the file path.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.clear" title="Permalink to this definition">#</a></dt>
<dd><p>Synchronous method for clearing context storage, removing all the stored Contexts.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.clear_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clear_async</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.clear_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.clear_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for clearing context storage, removing all the stored Contexts.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.contains_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">contains_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.contains_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.contains_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for finding whether any Context is stored with given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to check if Context instance is stored.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if there is Context accessible by given key, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.del_item_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">del_item_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.del_item_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.del_item_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for removing stored Context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to identify Context instance for deletion.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.full_path">
<span class="sig-name descname"><span class="pre">full_path</span></span><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.full_path" title="Permalink to this definition">#</a></dt>
<dd><p>Full path to access the context storage, as it was provided by user.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.get" title="Permalink to this definition">#</a></dt>
<dd><p>Synchronous method for accessing stored Context, returning default if no Context is stored with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to store Context instance.</p></li>
<li><p><strong>default</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>]) – Optional default value to be returned if no Context is found.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The stored context, associated with the given key or default value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.get_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.get_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.get_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for accessing stored Context, returning default if no Context is stored with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to store Context instance.</p></li>
<li><p><strong>default</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>]) – Optional default value to be returned if no Context is found.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The stored context, associated with the given key or default value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.get_item_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_item_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.get_item_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.get_item_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for accessing stored Context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to store Context instance.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The stored context, associated with the given key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.len_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">len_async</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.len_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.len_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for retrieving number of stored Contexts.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of stored Contexts.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.path">
<span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.path" title="Permalink to this definition">#</a></dt>
<dd><p><cite>full_path</cite> without a prefix defining db used</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dff.context_storages.database.DBContextStorage.set_item_async">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_item_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#DBContextStorage.set_item_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.DBContextStorage.set_item_async" title="Permalink to this definition">#</a></dt>
<dd><p>Asynchronous method for storing Context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>) – Hashable key used to store Context instance.</p></li>
<li><p><strong>value</strong> (<a class="reference internal" href="dff.script.core.context.html#dff.script.core.context.Context" title="dff.script.core.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>) – Context to store.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dff.context_storages.database.context_storage_factory">
<span class="sig-name descname"><span class="pre">context_storage_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#context_storage_factory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.context_storage_factory" title="Permalink to this definition">#</a></dt>
<dd><p>Use context_storage_factory to lazy import context storage types and instantiate them.
The function takes a database connection URI or its equivalent. It should be prefixed with database name,
followed by the symbol triplet ‘://’.</p>
<p>Then, you should list the connection parameters like this: user:password&#64;host:port/database
The whole URI will then look like this:</p>
<ul class="simple">
<li><p>shelve://path_to_the_file/file_name</p></li>
<li><p>json://path_to_the_file/file_name</p></li>
<li><p>pickle://path_to_the_file/file_name</p></li>
<li><p>sqlite+aiosqlite://path_to_the_file/file_name</p></li>
<li><p>redis://:pass&#64;localhost:6378/0</p></li>
<li><p>mongodb://admin:pass&#64;localhost:27016/admin</p></li>
<li><p>mysql+asyncmy://root:pass&#64;localhost:3306/test</p></li>
<li><p>postgresql+asyncpg://postgres:pass&#64;localhost:5430/test</p></li>
<li><p>grpc://localhost:2134/local</p></li>
<li><p>grpcs://localhost:2134/local</p></li>
</ul>
<p>For context storages that write to local files, the function expects a file path instead of connection params:
json://file.json
When using sqlite backend your prefix should contain three slashes if you use Windows, or four in other cases:
sqlite:////file.db
If you want to use additional parameters in class constructors, you can pass them to this function as kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Path to the file.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#dff.context_storages.database.DBContextStorage" title="dff.context_storages.database.DBContextStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">DBContextStorage</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dff.context_storages.database.threadsafe_method">
<span class="sig-name descname"><span class="pre">threadsafe_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dff/context_storages/database.html#threadsafe_method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dff.context_storages.database.threadsafe_method" title="Permalink to this definition">#</a></dt>
<dd><p>A decorator that makes sure methods of an object instance are threadsafe.</p>
</dd></dl>



                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="dff.context_storages.redis.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Redis</p>
      </div>
    </a>
    <a class="right-next"
       href="index_messenger_interfaces.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Messenger Interfaces</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Database</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage"><code class="docutils literal notranslate"><span class="pre">DBContextStorage</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.clear"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.clear()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.clear_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.clear_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.contains_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.contains_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.del_item_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.del_item_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.full_path"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.full_path</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.get"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.get()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.get_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.get_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.get_item_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.get_item_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.len_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.len_async()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.path"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.path</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.DBContextStorage.set_item_async"><code class="docutils literal notranslate"><span class="pre">DBContextStorage.set_item_async()</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.context_storage_factory"><code class="docutils literal notranslate"><span class="pre">context_storage_factory()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dff.context_storages.database.threadsafe_method"><code class="docutils literal notranslate"><span class="pre">threadsafe_method()</span></code></a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
    

    <a href="https://github.com/deeppavlov/dialog_flow_framework/blob/dev/dff/context_storages/database.py" data-behavior="call-to-action-event" data-response="View on Github" target="_blank">
        <div id="github-view-link">
            <span class="pytorch-github call-to-action-any"></span>
            <div class="call-to-action-desktop-view">View on GitHub</div>
            <div class="call-to-action-mobile-view">GitHub</div>
        </div>
    </a>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, DeepPavlov.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>